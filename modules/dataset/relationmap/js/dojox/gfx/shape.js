/*!***********************************************
 Copyright (c) 2016, Neusoft Inc.
 All rights reserved
 SaCa DataViz Version 3.1.0
 ************************************************/
dojo._hasResource["dojox.gfx.shape"]||(dojo._hasResource["dojox.gfx.shape"]=!0,dojo.provide("dojox.gfx.shape"),dojo.require("dojox.gfx._base"),dojo.declare("dojox.gfx.shape.Shape",null,{constructor:function(){this.rawNode=null,this.shape=null,this.matrix=null,this.fillStyle=null,this.strokeStyle=null,this.bbox=null,this.parent=null,this.parentMatrix=null},getNode:function(){return this.rawNode},getShape:function(){return this.shape},getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},getStroke:function(){return this.strokeStyle},getParent:function(){return this.parent},getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var t=this.getBoundingBox();if(!t)return null;var e=this._getRealMatrix();return gm=dojox.gfx.matrix,[gm.multiplyPoint(e,t.x,t.y),gm.multiplyPoint(e,t.x+t.width,t.y),gm.multiplyPoint(e,t.x+t.width,t.y+t.height),gm.multiplyPoint(e,t.x,t.y+t.height)]},getEventSource:function(){return this.rawNode},setClip:function(t){this.clip=t},getClip:function(){return this.clip},setShape:function(t){return this.shape=dojox.gfx.makeParameters(this.shape,t),this.bbox=null,this},setFill:function(t){if(!t)return this.fillStyle=null,this;var e=null;if("object"==typeof t&&"type"in t)switch(t.type){case"linear":e=dojox.gfx.makeParameters(dojox.gfx.defaultLinearGradient,t);break;case"radial":e=dojox.gfx.makeParameters(dojox.gfx.defaultRadialGradient,t);break;case"pattern":e=dojox.gfx.makeParameters(dojox.gfx.defaultPattern,t)}else e=dojox.gfx.normalizeColor(t);return this.fillStyle=e,this},setStroke:function(t){if(!t)return this.strokeStyle=null,this;("string"==typeof t||dojo.isArray(t)||t instanceof dojo.Color)&&(t={color:t});var e=this.strokeStyle=dojox.gfx.makeParameters(dojox.gfx.defaultStroke,t);return e.color=dojox.gfx.normalizeColor(e.color),this},setTransform:function(t){return this.matrix=dojox.gfx.matrix.clone(t?dojox.gfx.matrix.normalize(t):dojox.gfx.matrix.identity),this._applyTransform()},_applyTransform:function(){return this},moveToFront:function(){var t=this.getParent();return t&&(t._moveChildToFront(this),this._moveToFront()),this},moveToBack:function(){var t=this.getParent();return t&&(t._moveChildToBack(this),this._moveToBack()),this},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(t){return t?this.setTransform([this.matrix,t]):this},applyLeftTransform:function(t){return t?this.setTransform([t,this.matrix]):this},applyTransform:function(t){return t?this.setTransform([this.matrix,t]):this},removeShape:function(t){return this.parent&&this.parent.remove(this,t),this},_setParent:function(t,e){return this.parent=t,this._updateParentMatrix(e)},_updateParentMatrix:function(t){return this.parentMatrix=t?dojox.gfx.matrix.clone(t):null,this._applyTransform()},_getRealMatrix:function(){for(var t=this.matrix,e=this.parent;e;)e.matrix&&(t=dojox.gfx.matrix.multiply(e.matrix,t)),e=e.parent;return t}}),dojox.gfx.shape._eventsProcessing={connect:function(t,e,o){return arguments.length>2?dojo.connect(this.getEventSource(),t,e,o):dojo.connect(this.getEventSource(),t,e)},disconnect:function(t){dojo.disconnect(t)}},dojo.extend(dojox.gfx.shape.Shape,dojox.gfx.shape._eventsProcessing),dojox.gfx.shape.Container={_init:function(){this.children=[]},openBatch:function(){},closeBatch:function(){},add:function(t){var e=t.getParent();return e&&e.remove(t,!0),this.children.push(t),t._setParent(this,this._getRealMatrix())},remove:function(t,e){for(var o=0;o<this.children.length;++o)if(this.children[o]==t){e||(t.parent=null,t.parentMatrix=null),this.children.splice(o,1);break}return this},clear:function(){return this.children=[],this},_moveChildToFront:function(t){for(var e=0;e<this.children.length;++e)if(this.children[e]==t){this.children.splice(e,1),this.children.push(t);break}return this},_moveChildToBack:function(t){for(var e=0;e<this.children.length;++e)if(this.children[e]==t){this.children.splice(e,1),this.children.unshift(t);break}return this}},dojo.declare("dojox.gfx.shape.Surface",null,{constructor:function(){this.rawNode=null,this._parent=null,this._nodes=[],this._events=[]},destroy:function(){if(dojo.forEach(this._nodes,dojo.destroy),this._nodes=[],dojo.forEach(this._events,dojo.disconnect),this._events=[],this.rawNode=null,dojo.isIE)for(;this._parent.lastChild;)dojo.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},_getRealMatrix:function(){return null},isLoaded:!0,onLoad:function(t){},whenLoaded:function(t,e){var o=dojo.hitch(t,e);if(this.isLoaded)o(this);else var n=dojo.connect(this,"onLoad",function(t){dojo.disconnect(n),o(t)})}}),dojo.extend(dojox.gfx.shape.Surface,dojox.gfx.shape._eventsProcessing),dojo.declare("dojox.gfx.Point",null,{}),dojo.declare("dojox.gfx.Rectangle",null,{}),dojo.declare("dojox.gfx.shape.Rect",dojox.gfx.shape.Shape,{constructor:function(t){this.shape=dojox.gfx.getDefault("Rect"),this.rawNode=t},getBoundingBox:function(){return this.shape}}),dojo.declare("dojox.gfx.shape.Ellipse",dojox.gfx.shape.Shape,{constructor:function(t){this.shape=dojox.gfx.getDefault("Ellipse"),this.rawNode=t},getBoundingBox:function(){if(!this.bbox){var t=this.shape;this.bbox={x:t.cx-t.rx,y:t.cy-t.ry,width:2*t.rx,height:2*t.ry}}return this.bbox}}),dojo.declare("dojox.gfx.shape.Circle",dojox.gfx.shape.Shape,{constructor:function(t){this.shape=dojox.gfx.getDefault("Circle"),this.rawNode=t},getBoundingBox:function(){if(!this.bbox){var t=this.shape;this.bbox={x:t.cx-t.r,y:t.cy-t.r,width:2*t.r,height:2*t.r}}return this.bbox}}),dojo.declare("dojox.gfx.shape.Line",dojox.gfx.shape.Shape,{constructor:function(t){this.shape=dojox.gfx.getDefault("Line"),this.rawNode=t},getBoundingBox:function(){if(!this.bbox){var t=this.shape;this.bbox={x:Math.min(t.x1,t.x2),y:Math.min(t.y1,t.y2),width:Math.abs(t.x2-t.x1),height:Math.abs(t.y2-t.y1)}}return this.bbox}}),dojo.declare("dojox.gfx.shape.Polyline",dojox.gfx.shape.Shape,{constructor:function(t){this.shape=dojox.gfx.getDefault("Polyline"),this.rawNode=t},setShape:function(t,e){return t&&t instanceof Array?(this.inherited(arguments,[{points:t}]),e&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[t]),this},_normalizePoints:function(){var t=this.shape.points,e=t&&t.length;if(e&&"number"==typeof t[0]){for(var o=[],n=0;e>n;n+=2)o.push({x:t[n],y:t[n+1]});this.shape.points=o}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var t=this.shape.points,e=t.length,o=t[0],n={l:o.x,t:o.y,r:o.x,b:o.y},i=1;e>i;++i)o=t[i],n.l>o.x&&(n.l=o.x),n.r<o.x&&(n.r=o.x),n.t>o.y&&(n.t=o.y),n.b<o.y&&(n.b=o.y);this.bbox={x:n.l,y:n.t,width:n.r-n.l,height:n.b-n.t}}return this.bbox}}),dojo.declare("dojox.gfx.shape.Image",dojox.gfx.shape.Shape,{constructor:function(t){this.shape=dojox.gfx.getDefault("Image"),this.rawNode=t},getBoundingBox:function(){return this.shape},setStroke:function(){return this},setFill:function(){return this}}),dojo.declare("dojox.gfx.shape.Text",dojox.gfx.shape.Shape,{constructor:function(t){this.fontStyle=null,this.shape=dojox.gfx.getDefault("Text"),this.rawNode=t},getFont:function(){return this.fontStyle},setFont:function(t){return this.fontStyle="string"==typeof t?dojox.gfx.splitFontString(t):dojox.gfx.makeParameters(dojox.gfx.defaultFont,t),this._setFont(),this}}),dojox.gfx.shape.Creator={createShape:function(t){var e=dojox.gfx;switch(t.type){case e.defaultPath.type:return this.createPath(t);case e.defaultRect.type:return this.createRect(t);case e.defaultCircle.type:return this.createCircle(t);case e.defaultEllipse.type:return this.createEllipse(t);case e.defaultLine.type:return this.createLine(t);case e.defaultPolyline.type:return this.createPolyline(t);case e.defaultImage.type:return this.createImage(t);case e.defaultText.type:return this.createText(t);case e.defaultTextPath.type:return this.createTextPath(t)}return null},createGroup:function(){return this.createObject(dojox.gfx.Group)},createRect:function(t){return this.createObject(dojox.gfx.Rect,t)},createEllipse:function(t){return this.createObject(dojox.gfx.Ellipse,t)},createCircle:function(t){return this.createObject(dojox.gfx.Circle,t)},createLine:function(t){return this.createObject(dojox.gfx.Line,t)},createPolyline:function(t){return this.createObject(dojox.gfx.Polyline,t)},createImage:function(t){return this.createObject(dojox.gfx.Image,t)},createText:function(t){return this.createObject(dojox.gfx.Text,t)},createPath:function(t){return this.createObject(dojox.gfx.Path,t)},createTextPath:function(t){return this.createObject(dojox.gfx.TextPath,{}).setText(t)},createObject:function(t,e){return null}});