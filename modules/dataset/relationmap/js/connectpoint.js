/*!***********************************************
 Copyright (c) 2016, Neusoft Inc.
 All rights reserved
 SaCa DataViz Version 3.1.0
 ************************************************/
var _semantics_diagram_point_viewer_cls={surface:null,dimension:null,_parent:null,circle:null,position:null,constructor:function(t,e){this._parent=t,this.position=e},setGraphicContext:function(t){this.surface=t.surface,this._initView(),this.relocate(t.x,t.y)},_initView:function(){this.circle=this.surface.createCircle({cx:0,cy:0,r:this._parent.dimension.pointRadius}).setStroke(_infosetStyle.setPointStroke).setFill(_infosetStyle.pointFill),this._initEvent()},_initEvent:function(){var t=this._parent;this.surface.connect("onmouseover",this,function(e){dojo.stopEvent(e),this.circle.setFill(_infosetStyle.pointFillHighlight),dojo.publish("/semantics/itemfocus",[t.infoSet])}),this.surface.connect("onmouseout",this,function(e){dojo.stopEvent(e),this.circle.setFill(_infosetStyle.pointFill),dojo.publish("/semantics/itemblur",[t.infoSet])}),this.surface.connect("onmouseenter",this,function(e){dojo.stopEvent(e),this.circle.setFill(_infosetStyle.pointFillHighlight),dojo.publish("/semantics/itemfocus",[t.infoSet])}),this.surface.connect("onmouseleave",this,function(e){dojo.stopEvent(e),this.circle.setFill(_infosetStyle.pointFill),dojo.publish("/semantics/itemblur",[t.infoSet])});var e=new dojox.gfx.Moveable(this.surface,{mover:semantics.diagram.dojox.gfx.ArrowDragger});dojo.connect(e,"onMoveStart",this,function(e){e.arrow=new semantics.diagram.PlainArrow,e.arrow.setGraphicContext({surface:t.surface.parent.createGroup(),color:_infosetStyle.lineColor,line:"dash",eventSpace:!0}),e._locator=t,e._anchors=t.anchors,e.topics=[],e.topics.push(dojo.subscribe("/semantics/itemfocus",e,e.targetOn)),e.topics.push(dojo.subscribe("/semantics/itemblur",e,e.targetOff))}),dojo.connect(e,"onMoveStop",this,function(e){e.arrow.remove(),dojo.forEach(e.topics,dojo.unsubscribe),e.getTarget()&&t.infoSet.id!=e.getTarget().id&&dojo.publish("/semantics/addRelation",[t.infoSet,e.getTarget()])})},relocate:function(t,e){this.surface.applyLeftTransform({dx:t,dy:e})},destroy:function(){this.surface.removeShape()}};dojo.declare("semantics.diagram.Point",null,_semantics_diagram_point_viewer_cls);