/*!***********************************************
 Copyright (c) 2016, Neusoft Inc.
 All rights reserved
 SaCa DataViz Version 3.1.0
 ************************************************/
angular.module("app.security.forget.service",[]).directive("nicknameUnique",["$http","$timeout",function(e,t){return{restrict:"AE",require:"ngModel",link:function(n,i,r,a){i.bind("blur",function(n){if(a&&i.val()){var r=i.val(),l={method:"POST",url:charts_server+"/service/registration/checkname",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},data:"username="+r};e(l).then(function(e){e.data.error?(a.$setValidity("unique",!1),t(function(){a.$setValidity("unique",!0)},2500)):a.$setValidity("unique",!0)},function(e){a.$setValidity("unique",!0)})}})}}}]).directive("pwCheck",[function(){return{require:"ngModel",link:function(e,t,n,i){var r="#"+n.pwCheck;t.on("keyup",function(){e.$apply(function(){if(""!=t.val()){var e=t.val()===$(r).val();i.$setValidity("pwmatch",e)}})})}}}]).directive("csEmailTelVerify",[function(){return{require:"ngModel",link:function(e,t,n,i){var r=/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/,a=/^1\d{10}$/,l=/^~.*/;t.on("blur",function(){e.$apply(function(){var e=t.val();if(""!=e){var n=r.test(e),o=a.test(e),u=l.test(e);i.$setValidity("email_valid",n||o||u)}})})}}}]).directive("browserAutocompelteForm",function(){return{priority:10,link:function(e,t,n){t.on("submit",function(e){$("input[ng-model]",t).each(function(e,t){"checkbox"!==angular.element(this).attr("type")&&"radio"!==angular.element(this).attr("type")&&angular.element(this).controller("ngModel").$setViewValue($(this).val())})})}}}).directive("ngLoginSubmit",function(){return{restrict:"A",scope:{onSubmit:"=ngLoginSubmit"},link:function(e,t,n){$(t)[0].onsubmit=function(){return $("#login-login").val($("#login",t).val()),$("#login-password").val($("#signin_password",t).val()),e.onSubmit(function(){$("#signin_form")[0].submit()}),!1}}}}).directive("passwordlevel",function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,i){function r(e){var t=0;if(e.length<1)return t;if(e.length<6)return 1;switch(6==e.length&&t++,/\d/.test(e)&&t++,/[a-z]/.test(e)&&t++,/[A-Z]/.test(e)&&t++,/\W/.test(e)&&t++,t){case 1:return 1;case 2:return 2;case 3:case 4:return e.length<12?3:4;default:return 4}}var a=document.getElementById("tips"),l=document.getElementById("password"),o=a.getElementsByTagName("span"),u=0;$("#password").bind("onblur",function(){var e=this.value,t=$("#repeat_password").val();""!=t&&e!=t&&i.$setValidity("pwmatch",v)}),$("#password").bind("keyup onfocus onblur",function(){var t=r(this.value);for(console.log("level:"+t),a.className="s"+t,u=0;u<o.length;u++)o[u].className=o[u].innerHTML="",""!=l.value&&(o[t-1].className="active");var n=!(2>t);console.log("pwlevel:"+n),e.$apply(function(){i.$setValidity("pwlevel",n)})})}}});